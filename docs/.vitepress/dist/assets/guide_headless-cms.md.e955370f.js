import{_ as n,K as l,o as p,c as r,O as c,w as a,$ as o,a as e,k as s}from"./chunks/framework.9fa1e75e.js";const q=JSON.parse('{"title":"Using Apostrophe as a headless CMS","description":"","frontmatter":{},"headers":[],"relativePath":"guide/headless-cms.md","filePath":"guide/headless-cms.md","lastUpdated":1690289066000}'),i={name:"guide/headless-cms.md"},y=o('<h1 id="using-apostrophe-as-a-headless-cms" tabindex="-1">Using Apostrophe as a headless CMS <a class="header-anchor" href="#using-apostrophe-as-a-headless-cms" aria-label="Permalink to &quot;Using Apostrophe as a headless CMS&quot;">â€‹</a></h1><p>Apostrophe is fully featured as a traditional CMS. It is also immediately ready for use as a headless CMS. There are many scenarios where Apostrophe works well in a decoupled architecture, including:</p><ul><li>We may want to use Apostrophe to serve webpages normally, but also use the website data in another context, such as a mobile app.</li><li>We may want to go fully headless with a front end like Gatsby or Gridsome while also allowing editors to use Apostrophe&#39;s in-context editing.</li><li>We may have an app that handles features such as e-commerce but need a CMS to create and pipe content into the app.</li></ul><p>Regardless of the reason or the layers involved there are some common concepts to understand.</p><h2 id="accessing-data-using-the-rest-apis" tabindex="-1">Accessing data using the REST APIs <a class="header-anchor" href="#accessing-data-using-the-rest-apis" aria-label="Permalink to &quot;Accessing data using the REST APIs&quot;">â€‹</a></h2><p>Before going further, keep in mind that there is an <a href="/reference/api/README.html">API route reference section</a> that will include much of the following information in a more direct format. One section there that will not be fully covered in this guide will be the <a href="/reference/api/authentication.html">authentication APIs</a>. There are a few options for authentication discussed there.</p><p>One of the more common use cases for a headless CMS is to simply get data from the CMS for a public website built with React, Vue.js or some other framework. Since the certain data is publicly available in the front-end application, we can simply make that data publicly available directly through the REST API using <a href="/reference/api/authentication.html#allowing-public-access">a <code>publicApiProjection</code> option</a> on the doc type. This will only apply to <code>GET</code> requests.</p>',7),d=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"module.exports"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"  "),s("span",{style:{color:"#676E95","font-style":"italic"}},"// ...")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#F07178"}},"options"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#F07178"}},"publicApiProjection"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"title"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"slug"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"_url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"_author"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"main"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      "),s("span",{style:{color:"#F07178"}},"thumbnail"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),h=o(`<p>We would add a <code>publicApiProjection</code> object for each piece type or page type that the front end app accesses. Since the REST APIs for Apostrophe content are immediately ready there is no other configuration needed inside Apostrophe for a basic one-way data flow.</p><h2 id="getting-piece-data-from-the-rest-api" tabindex="-1">Getting piece data from the REST API <a class="header-anchor" href="#getting-piece-data-from-the-rest-api" aria-label="Permalink to &quot;Getting piece data from the REST API&quot;">â€‹</a></h2><p>Requesting and using <a href="/guide/pieces.html">piece</a> data should seem familiar to developers who have used a headless data source before. It is returned from the API request as an array of objects, each of which is an individual piece. Those results are paginated to send a limited number from any single request.</p><p>REST API routes are automatically constructed using the application&#39;s base URL, an API prefix (<code>/api/v1/</code>), the name of a content type module, and possibly a document ID. If using an API key for authentication, that would be added at the end in a query parameter as normal. For example, making a request for an <em><code>article</code></em> piece type from a website at <code>https://example.rocks</code> would use a URL like:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">https://example.rocks/api/v1/article</span></span></code></pre></div><p>When using Apostrophe as a headless CMS, we will most frequently be making <code>GET</code> requests from the Apostrophe app (see the <a href="/reference/api/pieces.html">pieces API reference</a> for more on other request types). There are two main types of <code>GET</code> requests we should think about: a &quot;get all&quot; request and a &quot;get one&quot; request.</p><h3 id="get-all-the-pieces" tabindex="-1">Get all the pieces! <a class="header-anchor" href="#get-all-the-pieces" aria-label="Permalink to &quot;Get all the pieces!&quot;">â€‹</a></h3><p>To make a <strong>&quot;get all&quot;</strong> request, hit the URL as described above. Using the Node.js <code>node-fetch</code> utility, such a request in a front end application might look like:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getArticles</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">fetch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://example.rocks/api/v1/article</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    method</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">results</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">articles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getArticles</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Do something with the articles!</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> (error) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Handle the error</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>Assuming the request goes through well, it will return an object with three properties:</p><ul><li><code>results</code>: an array of piece objects, limited to 10 pieces by default</li><li><code>pages</code>: the total number of possible &quot;pages&quot; of results for this request</li><li><code>currentPage</code>: the page number for that request (<code>1</code> for this first request)</li></ul><p>With that information we can make additional requests for more pages of results until we have as much data as we need.</p><h3 id="get-one-piece" tabindex="-1">Get one piece <a class="header-anchor" href="#get-one-piece" aria-label="Permalink to &quot;Get one piece&quot;">â€‹</a></h3><p>The <strong>&quot;get one&quot;</strong> type of request works similarly. Following the standard REST pattern, we add a document ID to the end of the previous request route URL to get only one result back. Each &quot;get all&quot; result object will include an <code>_id</code> property. Let&#39;s say that one <code>_id</code> was <code>j8e6n7n5y309:en:published</code>. We would make the request to:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/article/j8e6n7n5y309:en:published</span></span></code></pre></div><p>The response to that successful request will be <a href="/reference/api/pieces.html#piece-document-response-example">a single piece object</a>.</p><h2 id="getting-page-data-from-the-rest-api" tabindex="-1">Getting page data from the REST API <a class="header-anchor" href="#getting-page-data-from-the-rest-api" aria-label="Permalink to &quot;Getting page data from the REST API&quot;">â€‹</a></h2><p>Page REST API requests look very similar to piece requests. They follow the same REST API pattern:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># The home page and first-level children</span></span>
<span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/@apostrophecms/page</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># A single page with document _id \`903y5n76e8j:en:published\`</span></span>
<span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/@apostrophecms/page/903y5n76e8j:en:published</span></span></code></pre></div><p>The module name used for these requests is always <code>@apostrophecms/page</code>, the module that manages pages in Apostrophe. The response for a &quot;get one&quot; request is also similar to a single piece <code>GET</code> request. It is a single page object with the page data properties immediate at the top level.</p><p>The response for page &quot;get all&quot; requests work differently by default. This is because it reflects that pages have a hierarchical structure. The home page is the &quot;parent&quot; of the top-level pages, which then have additional &quot;child&quot; pages, and so on. As such, the response to a &quot;get all&quot; route as written above looks something like this:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ckhdscx5900054z9k88uqs16w</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Home Page</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">slug</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// ... additional properties</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">_url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:3000/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">_ancestors</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// Child pages ðŸ‘‡</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">_children</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ckhfen8ls0005mq9k8p9izkjt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Blog</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">slug</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/blog</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// ... additional properties</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:3000/blog</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_children</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ckhurshqd00088v9k6pfnqpjz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">About us</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">slug</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/about-us</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// ... additional properties</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:3000/about-us</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">_children</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>The home page object is returned with a <code>_children</code> array with the first-level pages.</p><p><strong>We can get all pages</strong>, with limited data on child pages, by adding the <code>?all=1</code> query parameter.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/@apostrophecms/page?all=1</span></span></code></pre></div><p><strong>We can request this data as a flat array</strong> by adding the <code>?flat=1</code> query parameter.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/@apostrophecms/page?all=1&amp;flat=1</span></span></code></pre></div><h2 id="getting-rendered-html-in-responses" tabindex="-1">Getting rendered HTML in responses <a class="header-anchor" href="#getting-rendered-html-in-responses" aria-label="Permalink to &quot;Getting rendered HTML in responses&quot;">â€‹</a></h2><p>Using an object of JSON-like data from a REST API is very normal from a headless CMS. Traditionally the application&#39;s &quot;head&quot; (such as a single page Vue.js, React, or Angular application) would use that structured data to display product, event, or similar content information. It is less common for a headless CMS to deliver page content that is tied to particular HTML markup and layout. More often, landing page text and images might be coded directly into the app code or otherwise not be from the same data source.</p><p>Apostrophe supports both approaches. The in-context editing features and <a href="/guide/areas-and-widgets.html">widget areas</a> give editors more control over content, but in its default form areas are fairly incomprehensible data objects. When areas are rendered as HTML from widget template files they are fully realized and easier to use.</p><p><strong>In any Apostrophe REST API single-document <code>GET</code> (&quot;get one&quot;) request, include the <code>?render-areas=1</code> query parameter.</strong> This will return the page document as JSON. Each area field in the response will have a <code>_rendered</code> property with a string of HTML instead of the <code>items</code> array of widget objects. This could be useful if we mostly want to insert the rendered area HTML into an existing template system.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/api/v1/@apostrophecms/page/903y5n76e8j:en:published?render-areas=1</span></span></code></pre></div><p>If we wanted to get the full page as HTML rendered using the page templates, we could make a <code>GET</code> request to the page URL (basically what browsers do). This is only good if we are not trying to insert it into other templates.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/about-us</span></span></code></pre></div><p>More likely we would only want the unique page content (without the <code>head</code> tag and outer wrapper elements), which we can get by adding the <code>aposRefresh=1</code> query parameter. It will include only the HTML markup for the page template. This is great for using Apostrophe page templates inside an external page wrapper (e.g., <code>head</code> tag, site header, and site footer).</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">GET https://example.rocks/about-us?aposRefresh=1</span></span></code></pre></div><h2 id="headless-integrations" tabindex="-1">Headless integrations <a class="header-anchor" href="#headless-integrations" aria-label="Permalink to &quot;Headless integrations&quot;">â€‹</a></h2><p>As official platform-specific plugins are made available they will be added here. These are meant to make it even easier to use Apostrophe REST APIs with certain popular front end systems.</p><h3 id="gatsby-source-plugin" tabindex="-1">Gatsby source plugin <a class="header-anchor" href="#gatsby-source-plugin" aria-label="Permalink to &quot;Gatsby source plugin&quot;">â€‹</a></h3><p><a href="https://gatsbyjs.com/" target="_blank" rel="noreferrer">Gatsby</a> is a very popular static site generator using React. The <a href="https://www.npmjs.com/package/gatsby-source-apostrophe" target="_blank" rel="noreferrer">Apostrophe source plugin</a> bridges the gap between the REST APIs and the GraphQL query language that Gatsby uses.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Direct GraphQL support is on the product roadmap for Apostrophe. If you are interested in that feature, <a href="https://portal.productboard.com/apostrophecms/1-product-roadmap/c/44-graphql-api" target="_blank" rel="noreferrer">please indicate that on the product roadmap card</a> so we can properly prioritize it.</p></div>`,41);function D(u,F,C,g,A,m){const t=l("AposCodeBlock");return p(),r("div",null,[y,c(t,null,{caption:a(()=>[e(" modules/article/index.js ")]),default:a(()=>[d,e()]),_:1}),h])}const b=n(i,[["render",D]]);export{q as __pageData,b as default};
